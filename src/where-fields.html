<!doctype html>
<html>
{import src/imports/head.templar}
<body>
	<div class="wrapper">
		{import src/imports/sidenav.templar}
		<section>

			{import src/imports/page-heading.templar}

			<p>
				{import src/imports/links/whereFields.templar} allow binding of parameters to 
				the fields mentioned in the {import src/imports/links/whereClause.templar} key.
			</p>

			<p>
				{import src/imports/links/whereFields.templar} are used within multiple 
				SQL interactors and are in one of two formats.
			</p>

			<p>
				The first format is a JSON array of String field names which can also cross
				table refenerce other fields.
			</p>

			<p>
				The second format is a JSON Array of JSON Objects which contain a 
				{import src/imports/links/name.templar} and an {import src/imports/links/alias.templar}
				key.  This is used where the field being parameterised is used in two different 
				ways.  See the examples at the bottom of the page for usage information.
			</p>

			<p>
				The where field can also be used with the {import src/imports/links/in.templar} 
				designator to provide a list of multiple values.
			</p>

			<h4>Allowable usage within SQL interactors for a whereField JSON Object/Array</h4>

			<table>
				<thead>
					<tr>
						<th>action name</th>
						<th>usage</th>
					</tr>
				</thead>

				<tbody>
					<tr>
						<td><strong>inserters</strong></td>
						<td>optional (only valid in conjunction with {import src/imports/links/whereClause.templar})</td>
					</tr>
					<tr>
						<td><strong>updaters</strong></td>
						<td>optional (only valid in conjunction with {import src/imports/links/whereClause.templar})</td>
					</tr>
					<tr>
						<td><strong>deleters</strong></td>
						<td>optional (only valid in conjunction with {import src/imports/links/whereClause.templar})</td>
					</tr>
					<tr>
						<td><strong>finders</strong></td>
						<td>optional (only valid in conjunction with {import src/imports/links/whereClause.templar})</td>
					</tr>
					<tr>
						<td><strong>questions</strong></td>
						<td>optional (only valid in conjunction with {import src/imports/links/whereClause.templar})</td>
					</tr>
					<tr>
						<td><strong>counters</strong></td>
						<td>optional (only valid in conjunction with {import src/imports/links/whereClause.templar})</td>
					</tr>
				</tbody>
			</table>

			<p>
				The {import src/imports/links/whereFields.templar} are a list of the name and type for each of the 
				{import src/imports/links/whereClause.templar} parameters.
			</p>

			<p>
				If there is a {import src/imports/links/whereFields.templar} key on the JSON object without any 
				{import src/imports/links/whereClause.templar} then this will generate a <strong>FATAL</strong> 
				validation message.
			</p>

			<h4>Example 1: Simple {import src/imports/links/whereFields.templar} example</h4>

			<p>
				The where fields reference the table to which they are attached.  The lookup 
				of the field definitions are automatically synchronised, such that the type 
				is inferred from the table.
			</p>

			<pre class="prettyprint">
				<code>
{{{\n}
{\t}...{\n}
{\n}
{\t}"whereClause": "where something = ? and something_else = ?",{\n}
{\t}"whereFields": [{\n}
{\t}{\t}"something",{\n}
{\t}{\t}"something_else"{\n}
{\t}]{\n}
}{\n}
				</code>
			</pre>

			<h4>Example 2: Simple {import src/imports/links/whereFields.templar} example, with cross-referenced tables</h4>

			<p>
				The where fields can also look up the details from other tables within the 
				h2zero file.  This can be accomplished by referencing the fully qualified 
				table name and field name, as shown below.
			</p>

			<p>
				The <code>some_other_table.something_else</code> designator will look up the 
				<code>something_else</code> field definition on the <code>some_other_table</code> 
				table definition.
			</p>

			<pre class="prettyprint">
				<code>
{{{\n}
{\t}...{\n}
{\n}
{\t}"whereClause": "where id_something = (select id_something from some_other_table where something_else = ?)",{\n}
{\t}"whereFields": [{\n}
{\t}{\t}"id_something",{\n}
{\t}{\t}"some_other_table.something_else"{\n}
{\t}]{\n}
}{\n}
				</code>
			</pre>

			<h4>Example 3: Aliased {import src/imports/links/whereFields.templar} example</h4>

			<p>
				The where fields reference the table to which they are attached, however, 
				the referenced field is used in two different contexts.  Consequently two 
				parameters are required to be passed, separately named.
			</p>

			<pre class="prettyprint">
				<code>
{{{\n}
{\t}...{\n}
{\n}
{\t}"whereClause": "where something &gt; ? and something &lt; ?",{\n}
{\t}"whereFields": [{\n}
{\t}{\t}{{ "name": "something", "alias": "from" },{\n}
{\t}{\t}{{ "name": "something", "alias": "to" }{\n}
{\t}]{\n}
}{\n}
				</code>
			</pre>

			<h4>Example 4: Using the {import src/imports/links/in.templar} designator</h4>

			<p>
				The <code>in:</code> designator tells h2zero that an <code>ArrayList</code> of 
				values will be passed in to the method.  The field reference will be looked up 
				on the table to which this is attached.
			</p>

			<pre class="prettyprint">
				<code>
{{{\n}
{\t}...{\n}
{\n}
{\t}"whereClause": " where id_something in (...)",{\n}
{\t}"whereFields": [{\n}
{\t}{\t}"in:id_something"{\n}
{\t}]{\n}
}{\n}
				</code>
			</pre>

		</section>
		{import src/imports/footer.templar}
	</div>
	<script src="javascripts/scale.fix.js"></script>

</body>
</html>